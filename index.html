<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Home</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent; /* Removes blue tap highlight on mobile */
        }
        /* Style for the glassmorphism effect */
        .glassmorphic {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Custom scrollbar for settings panel */
        .custom-scrollbar::-webkit-scrollbar {
            width: 5px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-black text-white overflow-hidden h-screen">

    <!-- Animated Background -->
    <canvas id="background-canvas" class="fixed top-0 left-0 w-full h-full z-0"></canvas>

    <!-- Main Content -->
    <main class="relative z-10 flex flex-col h-full p-6 sm:p-8 justify-between">

        <!-- Top Section: Weather -->
        <div class="w-full max-w-md mx-auto flex justify-end items-start text-sm">
            <div id="weather-display" class="text-right">
                <p id="weather-location" class="font-bold text-lg">Loading...</p>
                <p id="weather-details" class="opacity-80">Fetching weather data</p>
            </div>
        </div>

        <!-- Middle Section: Clock, Date & Search -->
        <div class="w-full max-w-md mx-auto flex flex-col items-center">
            <!-- Clock -->
            <div id="clock-display" class="flex items-end font-black mb-2 tracking-tighter drop-shadow-lg">
                <span id="clock-time" class="text-7xl sm:text-8xl">10:37</span>
                <div class="flex flex-col items-start leading-none pb-2 pl-2">
                    <span id="clock-seconds" class="text-2xl sm:text-3xl opacity-70">45</span>
                    <span id="clock-ampm" class="text-2xl sm:text-3xl opacity-70">PM</span>
                </div>
            </div>

            <!-- Date -->
            <div class="text-center text-lg font-medium opacity-80 mb-6">
                <span id="date-day">Saturday</span>, <span id="date-full">August 30</span>
            </div>

            <!-- Search Bar -->
            <form action="https://www.google.com/search" method="get" class="w-full group">
                <div class="relative flex items-center">
                     <svg class="w-5 h-5 absolute left-4 text-gray-300 pointer-events-none" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <input type="text" name="q" placeholder="Search Google or type a URL"
                           class="w-full bg-gray-800 bg-opacity-70 border border-gray-700 rounded-full py-3 pr-4 pl-12 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-gray-700 transition duration-300 placeholder-gray-400">
                </div>
            </form>
        </div>

        <!-- Bottom Section: Quick Links -->
        <div class="w-full max-w-md mx-auto">
            <div id="quick-links-grid" class="grid grid-cols-4 gap-4">
                <!-- Links will be dynamically inserted here -->
            </div>
        </div>
    </main>

    <!-- Settings Button -->
    <button id="settings-btn" class="fixed top-6 left-6 z-20 glassmorphic rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition-transform hover:scale-110 active:scale-95">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.665.996.405 1.525l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.405-1.525l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.213-1.28z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
    </button>
    
    <!-- AI Access Button -->
    <button id="ai-btn" class="fixed bottom-6 right-6 z-20 glassmorphic rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition-transform hover:scale-110 active:scale-95">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.455-2.456L12.5 17.25l1.178-.398a3.375 3.375 0 002.455-2.456L16.5 13.5l.398 1.178a3.375 3.375 0 002.456 2.456l1.178.398-1.178.398a3.375 3.375 0 00-2.456 2.456z" /></svg>
    </button>
    
    <!-- Settings Panel -->
    <div id="settings-panel" class="fixed inset-y-0 right-0 w-full max-w-sm glassmorphic shadow-2xl z-30 transform translate-x-full transition-transform duration-300 ease-in-out p-6 flex flex-col">
        <div class="flex-shrink-0">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Customize Links</h2>
                <button id="close-settings-btn" class="text-gray-400 hover:text-white text-3xl">&times;</button>
            </div>
        </div>
        <div id="links-settings-container" class="space-y-4 overflow-y-auto flex-grow pr-2 custom-scrollbar">
            <!-- JS will populate this -->
        </div>
        <div class="flex-shrink-0 pt-4">
            <button id="save-links-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">Save Changes</button>
        </div>
    </div>
    
    <!-- AI Access Panel -->
    <div id="ai-panel" class="fixed inset-y-0 right-0 w-full max-w-sm glassmorphic shadow-2xl z-30 transform translate-x-full transition-transform duration-300 ease-in-out p-6 flex flex-col">
        <div class="flex-shrink-0">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">AI Assistants</h2>
                <button id="close-ai-btn" class="text-gray-400 hover:text-white text-3xl">&times;</button>
            </div>
        </div>
        <div id="ai-links-container" class="space-y-3 overflow-y-auto flex-grow pr-2 custom-scrollbar">
            <!-- AI Links will be populated here -->
        </div>
    </div>


    <script>
        const DEFAULT_LINKS = [
            { name: 'YouTube', url: 'https://www.youtube.com' },
            { name: 'Reddit', url: 'https://www.reddit.com' },
            { name: 'Amazon', url: 'https://www.amazon.com' },
            { name: 'GitHub', url: 'https://www.github.com' },
            { name: 'Twitter', url: 'https://www.twitter.com' },
            { name: 'Gmail', url: 'https://mail.google.com' },
            { name: 'Netflix', url: 'https://www.netflix.com' },
            { name: 'Spotify', url: 'https://www.spotify.com' }
        ];
        
        const AI_LINKS = [
            { name: 'Gemini', url: 'https://gemini.google.com/' },
            { name: 'ChatGPT', url: 'https://chat.openai.com/' },
            { name: 'Grok', url: 'https://grok.x.ai/' },
            { name: 'Perplexity', url: 'https://www.perplexity.ai/' },
            { name: 'Claude', url: 'https://claude.ai/' }
        ];

        let quickLinks = [];

        // --- Quick Links Functions ---
        function renderQuickLinks() {
            const grid = document.getElementById('quick-links-grid');
            if (!grid) return;
            grid.innerHTML = '';
            quickLinks.slice(0, 8).forEach(link => { // Ensure only 8 links are rendered
                if (!link || !link.url) return;
                
                const linkUrl = link.url.startsWith('http') ? link.url : `https://${link.url}`;
                const domain = new URL(linkUrl).hostname;

                const linkEl = document.createElement('a');
                linkEl.href = linkUrl;
                linkEl.className = "flex flex-col items-center justify-center p-2 glassmorphic rounded-xl aspect-square transition-transform duration-200 hover:scale-110 active:scale-95";
                linkEl.target = "_blank";
                linkEl.rel = "noopener noreferrer";

                linkEl.innerHTML = `
                    <img src="https://www.google.com/s2/favicons?domain=${domain}&sz=64" 
                         onerror="this.onerror=null;this.src='https://placehold.co/64x64/374151/FFFFFF?text=${link.name.charAt(0)}';"
                         alt="${link.name}" 
                         class="w-6 h-6 object-contain rounded-md">
                    <span class="text-xs mt-1 opacity-80 truncate w-full text-center">${link.name}</span>
                `;
                grid.appendChild(linkEl);
            });
        }

        function renderSettingsForm() {
            const container = document.getElementById('links-settings-container');
            if (!container) return;
            container.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                const link = quickLinks[i] || { name: '', url: '' };
                const itemEl = document.createElement('div');
                itemEl.className = "p-3 bg-gray-800 rounded-lg";
                itemEl.innerHTML = `
                    <label class="text-sm font-medium text-gray-400">Link ${i + 1}</label>
                    <div class="flex gap-2 mt-1">
                        <input type="text" value="${link.name}" class="link-name-input w-1/3 bg-gray-700 border border-gray-600 rounded-md px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500" placeholder="Name">
                        <input type="url" value="${link.url}" class="link-url-input w-2/3 bg-gray-700 border border-gray-600 rounded-md px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500" placeholder="https://example.com">
                    </div>
                `;
                container.appendChild(itemEl);
            }
        }
        
        function loadLinks() {
            try {
                const savedLinks = localStorage.getItem('quickLinks');
                if (savedLinks) {
                    quickLinks = JSON.parse(savedLinks);
                } else {
                    quickLinks = DEFAULT_LINKS;
                }
            } catch (e) {
                console.error("Could not load links from localStorage", e);
                quickLinks = DEFAULT_LINKS;
            }
        }
        
        function setupSettingsListeners() {
            const settingsPanel = document.getElementById('settings-panel');
            const settingsBtn = document.getElementById('settings-btn');
            const closeBtn = document.getElementById('close-settings-btn');
            const saveBtn = document.getElementById('save-links-btn');

            if (!settingsPanel || !settingsBtn || !closeBtn || !saveBtn) return;

            settingsBtn.addEventListener('click', () => {
                renderSettingsForm();
                settingsPanel.classList.remove('translate-x-full');
            });

            closeBtn.addEventListener('click', () => {
                settingsPanel.classList.add('translate-x-full');
            });

            saveBtn.addEventListener('click', () => {
                const nameInputs = document.querySelectorAll('.link-name-input');
                const urlInputs = document.querySelectorAll('.link-url-input');

                const newLinks = [];
                for (let i = 0; i < nameInputs.length; i++) {
                    newLinks.push({
                        name: nameInputs[i].value,
                        url: urlInputs[i].value
                    });
                }

                quickLinks = newLinks;
                localStorage.setItem('quickLinks', JSON.stringify(quickLinks));
                renderQuickLinks();
                settingsPanel.classList.add('translate-x-full');
            });
        }
        
        // --- AI Panel Functions ---
        function renderAILinks() {
            const container = document.getElementById('ai-links-container');
            if (!container) return;
            container.innerHTML = '';
            AI_LINKS.forEach(link => {
                const domain = new URL(link.url).hostname;
                const linkEl = document.createElement('a');
                linkEl.href = link.url;
                linkEl.target = "_blank";
                linkEl.rel = "noopener noreferrer";
                linkEl.className = "flex items-center gap-4 p-3 bg-gray-800 bg-opacity-70 rounded-lg hover:bg-gray-700 transition-colors";
                linkEl.innerHTML = `
                    <img src="https://www.google.com/s2/favicons?domain=${domain}&sz=32" 
                         onerror="this.onerror=null;this.src='https://placehold.co/32x32/374151/FFFFFF?text=${link.name.charAt(0)}';"
                         alt="${link.name} logo" class="w-6 h-6 rounded-md">
                    <span class="font-medium">${link.name}</span>
                `;
                container.appendChild(linkEl);
            });
        }
        
        function setupAIPanelListeners() {
            const aiPanel = document.getElementById('ai-panel');
            const aiBtn = document.getElementById('ai-btn');
            const closeBtn = document.getElementById('close-ai-btn');

            if (!aiPanel || !aiBtn || !closeBtn) return;

            aiBtn.addEventListener('click', () => {
                aiPanel.classList.remove('translate-x-full');
            });

            closeBtn.addEventListener('click', () => {
                aiPanel.classList.add('translate-x-full');
            });
        }


        // --- Main Update Function ---
        function updateClockAndDate() {
            const now = new Date();
            const clockTimeEl = document.getElementById('clock-time');
            const clockSecondsEl = document.getElementById('clock-seconds');
            const clockAmPmEl = document.getElementById('clock-ampm');
            const dateDayEl = document.getElementById('date-day');
            const dateFullEl = document.getElementById('date-full');

            // --- Clock Update ---
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';

            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            
            clockTimeEl.textContent = `${hours}:${minutes}`;
            clockSecondsEl.textContent = seconds;
            clockAmPmEl.textContent = ampm;


            // --- Date Update ---
            const dayOptions = { weekday: 'long' };
            const dateOptions = { month: 'long', day: 'numeric' };
            if (dateDayEl) dateDayEl.textContent = now.toLocaleDateString('en-US', dayOptions);
            if (dateFullEl) dateFullEl.textContent = now.toLocaleDateString('en-US', dateOptions);
        }

        // --- Weather Function ---
        function getWeather() {
            const apiKey = "YOUR_API_KEY"; // Replace with your OpenWeatherMap API key

            const locationEl = document.getElementById('weather-location');
            const detailsEl = document.getElementById('weather-details');

            const success = (position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

                fetch(apiUrl)
                    .then(response => {
                        if (!response.ok) throw new Error('Weather data not available.');
                        return response.json();
                    })
                    .then(data => {
                        locationEl.textContent = `${data.name}, ${data.sys.country}`;
                        detailsEl.textContent = `${data.weather[0].main}, ${Math.round(data.main.temp)}°C`;
                    })
                    .catch(error => {
                        console.error('Error fetching weather:', error);
                        detailsEl.textContent = 'Weather Unavailable';
                    });
            };

            const error = () => {
                locationEl.textContent = 'Location Off';
                detailsEl.textContent = 'Enable location for weather';
            };
            
            if (apiKey === "YOUR_API_KEY" || !apiKey) {
                 locationEl.textContent = 'Weather';
                 detailsEl.textContent = 'Add API Key';
                 return;
            }

            if ('geolocation' in navigator) {
                navigator.geolocation.getCurrentPosition(success, error);
            } else {
                error();
            }
        }

        // --- Canvas Animation ---
        function setupCanvasAnimation() {
            const canvas = document.getElementById('background-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particlesArray;

            class Particle {
                constructor(x, y, dX, dY, size, color) {
                    this.x = x; this.y = y; this.directionX = dX; this.directionY = dY; this.size = size; this.color = color;
                }
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }
                update() {
                    if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                    if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                    this.x += this.directionX;
                    this.y += this.directionY;
                    this.draw();
                }
            }

            function init() {
                particlesArray = [];
                let num = (canvas.height * canvas.width) / 9000;
                for (let i = 0; i < num * 0.5; i++) { // Reduced particle count for subtlety
                    let size = (Math.random() * 1.5) + 0.5;
                    let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                    let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                    let dX = (Math.random() * 0.3) - 0.15;
                    let dY = (Math.random() * 0.3) - 0.15;
                    let color = 'rgba(255, 255, 255, 0.5)';
                    particlesArray.push(new Particle(x, y, dX, dY, size, color));
                }
            }

            function animate() {
                requestAnimationFrame(animate);
                ctx.clearRect(0, 0, innerWidth, innerHeight);
                particlesArray.forEach(p => p.update());
                connect();
            }

            function connect() {
                let opacityValue = 1;
                for (let a = 0; a < particlesArray.length; a++) {
                    for (let b = a; b < particlesArray.length; b++) {
                        let distance = ((particlesArray[a].x - particlesArray[b].x) ** 2) + ((particlesArray[a].y - particlesArray[b].y) ** 2);
                        if (distance < (canvas.width / 9) * (canvas.height / 9)) {
                            opacityValue = 1 - (distance / 20000);
                            ctx.strokeStyle = `rgba(220, 220, 220, ${opacityValue * 0.3})`;
                            ctx.lineWidth = 1;
                            ctx.beginPath();
                            ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                            ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                            ctx.stroke();
                        }
                    }
                }
            }
            
            window.addEventListener('resize', () => {
                canvas.width = innerWidth;
                canvas.height = innerHeight;
                init();
            });
            
            init();
            animate();
        }

        // --- Initial Load & Interval ---
        document.addEventListener('DOMContentLoaded', () => {
            updateClockAndDate(); 
            getWeather(); 
            loadLinks();
            renderQuickLinks();
            renderAILinks();
            setupSettingsListeners();
            setupAIPanelListeners();
            setupCanvasAnimation();
            setInterval(updateClockAndDate, 1000); 
        });
    </script>

</body>
</html>

