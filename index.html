<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MyBrowser Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f3f4f6; /* gray-100 */
            --card-bg-color: #ffffff; /* white */
            --text-color: #111827; /* gray-900 */
            --text-secondary-color: #6b7280; /* gray-500 */
            --accent-color: #3b82f6; /* blue-500 */
            --border-color: #e5e7eb; /* gray-200 */
        }

        html.dark {
            --bg-color: #111827; /* gray-900 */
            --card-bg-color: #1f2937; /* gray-800 */
            --text-color: #f9fafb; /* gray-50 */
            --text-secondary-color: #9ca3af; /* gray-400 */
            --accent-color: #60a5fa; /* blue-400 */
            --border-color: #374151; /* gray-700 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overscroll-behavior-y: contain;
        }
        
        .bottom-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            min-height: 100vh;
            padding-bottom: 8vh;
        }

        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        /* Settings Panel Transition */
        #settingsModal {
            transition: opacity 0.3s ease-in-out;
        }
        #settingsPanel {
            transition: transform 0.3s ease-in-out;
        }
        #settingsModal.hidden #settingsPanel {
            transform: translateY(100%);
        }

    </style>
</head>
<body class="overflow-x-hidden">

    <div class="bottom-container">
        <!-- Search Bar -->
        <header class="p-4 w-full max-w-md">
             <form id="search-form" class="flex items-center w-full bg-[var(--card-bg-color)] rounded-full shadow-sm border border-[var(--border-color)] px-4 py-2.5">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-[var(--text-secondary-color)]"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <input id="search-input" type="text" placeholder="Search Google or type URL" class="w-full bg-transparent text-[var(--text-color)] placeholder-[var(--text-secondary-color)] focus:outline-none ml-3 mr-2">
                <button type="button" id="settings-btn" class="p-1 text-[var(--text-secondary-color)]">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                </button>
                <button type="submit" class="hidden"></button>
            </form>
        </header>
    
        <!-- Quick Links -->
        <main class="px-4 mt-6 w-full max-w-md">
            <section id="quick-links">
                <div id="quick-links-grid" class="grid grid-cols-4 gap-4 text-center">
                    <!-- Links will be dynamically inserted here -->
                </div>
            </section>
        </main>
    </div>
    
    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-60 z-40 hidden">
        <div id="settingsPanel" class="absolute bottom-0 left-0 right-0 bg-[var(--card-bg-color)] rounded-t-2xl p-4 transform translate-y-full">
            <div class="flex justify-between items-center mb-4 pb-2 border-b border-[var(--border-color)]">
                <h2 class="text-lg font-bold">Settings</h2>
                <button id="close-settings-btn" class="p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            
            <div class="space-y-4">
                <h3 class="font-semibold text-[var(--text-secondary-color)] text-sm px-2">Manage Quick Links</h3>
                <div id="settings-links-list" class="space-y-2">
                    <!-- Settings links list will be rendered here -->
                </div>
                <button id="add-new-link-btn" class="w-full text-center py-3 bg-[var(--bg-color)] rounded-lg font-semibold text-[var(--accent-color)]">Add New Link</button>
            </div>
        </div>
    </div>

    <!-- Edit/Add Link Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-[var(--card-bg-color)] rounded-2xl p-6 w-full max-w-sm shadow-xl">
            <h2 id="modal-title" class="text-lg font-bold mb-4">Edit Link</h2>
            <form id="edit-form">
                <input type="hidden" id="edit-index">
                <div class="space-y-4">
                    <div>
                        <label for="edit-name" class="text-sm font-medium text-[var(--text-secondary-color)]">Name</label>
                        <input type="text" id="edit-name" required class="mt-1 w-full bg-[var(--bg-color)] border border-[var(--border-color)] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]">
                    </div>
                    <div>
                        <label for="edit-url" class="text-sm font-medium text-[var(--text-secondary-color)]">URL</label>
                        <input type="url" id="edit-url" required placeholder="https://example.com" class="mt-1 w-full bg-[var(--bg-color)] border border-[var(--border-color)] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]">
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" id="cancel-edit" class="px-4 py-2 rounded-lg text-sm font-semibold bg-[var(--bg-color)] hover:opacity-80">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-lg text-sm font-semibold bg-[var(--accent-color)] text-white hover:opacity-80">Save</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- THEME MANAGEMENT ---
            const themeManager = {
                init() {
                    const savedTheme = localStorage.getItem('theme');
                    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                },
                toggle() {
                    const isDark = document.documentElement.classList.toggle('dark');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                }
            };
            themeManager.init();

            // --- DATA MANAGEMENT ---
            let quickLinksData = [];
            const defaultLinks = [
                { name: 'Google', url: 'https://google.com', icon: 'G', color: 'bg-blue-500' },
                { name: 'YouTube', url: 'https://youtube.com', icon: 'YT', color: 'bg-red-500' },
                { name: 'Email', url: 'https://mail.google.com', icon: 'M', color: 'bg-green-500' },
                { name: 'GitHub', url: 'https://github.com', icon: 'GH', color: 'bg-gray-700' },
                { name: 'Twitter', url: 'https://twitter.com', icon: 'X', color: 'bg-black' },
                { name: 'Maps', url: 'https://maps.google.com', icon: 'M', color: 'bg-orange-500' },
                { name: 'Photos', url: 'https://photos.google.com', icon: 'P', color: 'bg-yellow-500' },
                { name: 'Add', url: '#', icon: '+', color: 'bg-gray-200 dark:bg-gray-700' }
            ];

            function loadQuickLinks() {
                const storedLinks = localStorage.getItem('quickLinks');
                quickLinksData = storedLinks ? JSON.parse(storedLinks) : defaultLinks.slice(0, -1); // Don't store the add button
                renderQuickLinks();
            }

            function saveQuickLinks() {
                localStorage.setItem('quickLinks', JSON.stringify(quickLinksData));
            }

            // --- ELEMENTS ---
            const quickLinksGrid = document.getElementById('quick-links-grid');
            const editModal = document.getElementById('editModal');
            const editForm = document.getElementById('edit-form');
            const searchForm = document.getElementById('search-form');
            const searchInput = document.getElementById('search-input');
            const settingsBtn = document.getElementById('settings-btn');
            const settingsModal = document.getElementById('settingsModal');
            const closeSettingsBtn = document.getElementById('close-settings-btn');
            const settingsLinksList = document.getElementById('settings-links-list');
            const addNewLinkBtn = document.getElementById('add-new-link-btn');
            
            // --- RENDER FUNCTIONS ---
            function renderQuickLinks() {
                quickLinksGrid.innerHTML = '';
                const linksToRender = [...quickLinksData];
                // Cap at 7 links and then show an add button
                if (linksToRender.length < 8) {
                     linksToRender.push({ isAddButton: true });
                }
                
                linksToRender.slice(0, 8).forEach((link, index) => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'flex flex-col items-center space-y-2';

                    if (link.isAddButton) {
                        itemEl.innerHTML = `
                            <button class="w-14 h-14 bg-[var(--bg-color)] border-2 border-dashed border-[var(--border-color)] rounded-2xl flex items-center justify-center text-[var(--text-secondary-color)]" aria-label="Add new link">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            </button>
                            <span class="text-xs text-[var(--text-secondary-color)]">Add</span>
                        `;
                        itemEl.querySelector('button').addEventListener('click', () => {
                             openSettings();
                             handleAddLink();
                        });
                    } else {
                        itemEl.innerHTML = `
                            <a href="${link.url}" class="flex flex-col items-center space-y-2">
                                <div class="w-14 h-14 ${link.color} rounded-2xl flex items-center justify-center text-white font-bold text-lg">
                                    ${link.icon}
                                </div>
                                <span class="text-xs text-[var(--text-secondary-color)] truncate w-14">${link.name}</span>
                            </a>
                        `;
                    }
                    quickLinksGrid.appendChild(itemEl);
                });
            }

            function renderSettingsLinksList() {
                settingsLinksList.innerHTML = '';
                if(quickLinksData.length === 0) {
                     settingsLinksList.innerHTML = `<p class="text-center text-sm text-[var(--text-secondary-color)] py-4">No links yet. Add one!</p>`;
                }
                quickLinksData.forEach((link, index) => {
                    const item = document.createElement('div');
                    item.className = 'flex items-center bg-[var(--bg-color)] p-2 rounded-lg';
                    item.innerHTML = `
                        <div class="w-10 h-10 ${link.color} rounded-lg flex items-center justify-center text-white font-bold text-sm">${link.icon}</div>
                        <div class="ml-3 flex-1 overflow-hidden">
                            <p class="font-medium truncate">${link.name}</p>
                            <p class="text-xs text-[var(--text-secondary-color)] truncate">${link.url}</p>
                        </div>
                        <button class="edit-link-btn p-2 text-[var(--text-secondary-color)]" data-index="${index}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        </button>
                        <button class="remove-link-btn p-2 text-red-500" data-index="${index}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        </button>
                    `;
                    settingsLinksList.appendChild(item);
                });

                // Add event listeners for the new buttons
                document.querySelectorAll('.edit-link-btn').forEach(btn => btn.addEventListener('click', (e) => handleEditLink(e.currentTarget.dataset.index)));
                document.querySelectorAll('.remove-link-btn').forEach(btn => btn.addEventListener('click', (e) => handleRemoveLink(e.currentTarget.dataset.index)));
            }
            
            // --- SEARCH FUNCTIONALITY ---
            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const query = searchInput.value.trim();
                if (!query) return;
                try {
                    new URL(query);
                    window.location.href = query.startsWith('http') ? query : `https://${query}`;
                } catch (_) {
                    window.location.href = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                }
            });

            // --- SETTINGS MODAL ---
            function openSettings() {
                renderSettingsLinksList();
                settingsModal.classList.remove('hidden');
            }
            function closeSettings() {
                settingsModal.classList.add('hidden');
            }
            settingsBtn.addEventListener('click', openSettings);
            closeSettingsBtn.addEventListener('click', closeSettings);
            settingsModal.addEventListener('click', (e) => {
                if (e.target === settingsModal) closeSettings();
            });

            // --- EDIT/ADD/REMOVE LOGIC ---
            addNewLinkBtn.addEventListener('click', () => handleAddLink());
            
            function handleAddLink() {
                document.getElementById('modal-title').innerText = 'Add Link';
                editForm.reset();
                document.getElementById('edit-index').value = '';
                editModal.classList.remove('hidden');
            }

            function handleEditLink(index) {
                const linkData = quickLinksData[index];
                document.getElementById('modal-title').innerText = 'Edit Link';
                document.getElementById('edit-index').value = index;
                document.getElementById('edit-name').value = linkData.name;
                document.getElementById('edit-url').value = linkData.url;
                editModal.classList.remove('hidden');
            }

            function handleRemoveLink(index) {
                quickLinksData.splice(index, 1);
                saveAndRerender();
            }

            document.getElementById('cancel-edit').addEventListener('click', () => {
                editModal.classList.add('hidden');
            });

            editForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const index = document.getElementById('edit-index').value;
                const name = document.getElementById('edit-name').value;
                const url = document.getElementById('edit-url').value;
                const icon = name.substring(0, 2).toUpperCase();

                // Simple color hashing for variety
                const colors = ['bg-blue-500', 'bg-red-500', 'bg-green-500', 'bg-yellow-500', 'bg-indigo-500', 'bg-purple-500', 'bg-pink-500'];
                const color = colors[Math.abs(name.split('').reduce((a,b)=>{a=((a<<5)-a)+b.charCodeAt(0);return a&a},0)) % colors.length];

                const newLinkData = { name, url, icon, color };

                if (index) {
                    quickLinksData[index] = newLinkData;
                } else {
                    if (quickLinksData.length < 8) {
                        quickLinksData.push(newLinkData);
                    } else {
                        // Optional: Show an error/alert that the max number of links is reached
                        console.log("Maximum number of links reached.");
                    }
                }
                
                saveAndRerender();
                editModal.classList.add('hidden');
            });
            
            function saveAndRerender() {
                saveQuickLinks();
                renderQuickLinks();
                renderSettingsLinksList();
            }

            // --- INITIALIZATION ---
            loadQuickLinks();
        });
    </script>
</body>
</html>


